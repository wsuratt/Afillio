%h2
  .text-center
    Products
    .badge.bg-danger
      = @pagy.count
%p

.row
  .col-md-2
    = search_form_for @ransack_products, as: :products_search, url: @ransack_path do |f|
      Search by:
      = f.search_field :title_cont, placeholder: 'Title', class: 'form-control form-control-sm'
      = f.label :category
      .row
      = f.select :category_cont, Product.categories, include_blank: true
      .row
      // = f.label :price
      // = f.search_field :price_eq, placeholder: 'Price', class: 'form-control form-control-sm'
      // = f.label :commission
      // = f.search_field :commission_eq, placeholder: 'Commission', class: 'form-control form-control-sm'
      // = f.label :vendor
      // = f.search_field :user_email_cont, placeholder: 'Email', class: 'form-control form-control-sm'
      Sort by:
      .row
      = sort_link(@ransack_products, :price)
      .row
      = sort_link(@ransack_products, :commission)
      .row
      = sort_link(@ransack_products, :orders_count, "Most Popular")
      .row
      = sort_link(@ransack_products, :created_at, "Newest")
      .row
      - if current_page?(created_products_path)
        = f.check_box :show_true
        = f.label 'Shown in store'
      .row
      = f.submit
    = link_to 'refresh', @ransack_path


  .col-md-10
    .row.row-cols-1.row-cols-2.row-cols-lg-3.row-cols-lg-4.g-4
      - @products.each do |product|
        - if current_page?(products_path)
          - if product.show
            .col
              = render 'products/product', product: product
        - else
          .col
            = render 'products/product', product: product
    %p
    != pagy_bootstrap_nav(@pagy)
%br
